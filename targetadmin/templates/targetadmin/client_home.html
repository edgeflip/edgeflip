{% extends "targetadmin/page.html" %}
{% block title %}{{ client.name }}{% endblock %}

{% block require %}
    require( ['app', 'sidebar', 'clientHome', 'views/help'], function(app, Sidebar, ClientHome, Help) {

            new Sidebar( {
                parentEl: $("#content-container"),
                model: new Backbone.Model( { state: 'campaigns' } ),
                templateOptions: {
                    logoSrc: "{{ STATIC_URL }}img/edgeflip-logo.png",
                    clientName: "{{ client.name }}",
                },
                reportingDashboardURL: "{% url 'reporting:main' %}"
            } );
            
            new ClientHome( {
                parentEl: $("#content-container"),
                campaigns: {{ campaigns|safe }},
                createCampaignURL: "{% url 'targetadmin:campaign-wizard' client.pk %}",
                campaignSummaryURL: "{% url 'targetadmin:campaign-summary' client.pk 0 %}"
            } );

            new Help( {
                parentEl: $("#content-container"),
                templateOptions: {
                    howItWorksSrc: "{{ STATIC_URL }}img/how-it-works.jpg"
                }
            } ).$el.hide();
        }
    );
{% endblock %}
