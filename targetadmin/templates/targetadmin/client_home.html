{% extends "targetadmin/page.html" %}
{% block title %}{{ client.name }}{% endblock %}

{% block require %}
    require(
        [
          'app',
          'views/sidebar',
          'views/clientCampaigns',
          'templates/miniHeader',
        ], function(app, Sidebar, ClientCampaigns, InsightsWidgets, miniHeader) {

        var clientCampaignsContent =        
                new ClientCampaigns( {
                    campaigns: {{ campaigns|safe }},
                    campaignSummaryURL: "{% url 'targetadmin:campaign-summary' client.pk 0 %}"
                } ).$el;
        
        Backbone.View.prototype.parentEl.prepend( miniHeader( { name: "{{client.name}}" } ) );

        new Sidebar( {
            model: new Backbone.Model( {
                state: 'campaigns',
                logoSrc: "{{ STATIC_URL }}img/edgeflip-logo.png",
                nav: [
                    { name: 'campaigns',
                      label: 'Campaigns',
                      glyphClass: 'glyphicon glyphicon-share',
                      content: clientCampaignsContent
                    },
                    { name: 'reports',
                      label: 'Reports',
                      glyphClass: 'glyphicon glyphicon-stats'
                    },
                    { name: 'help',
                      label: 'Help',
                      glyphClass: 'glyphicon glyphicon-info-sign'
                    }
                ]
            } ),
            reportingDashboardURL: "{% url 'reporting:main' %}"
        } );
    } );
{% endblock %}
